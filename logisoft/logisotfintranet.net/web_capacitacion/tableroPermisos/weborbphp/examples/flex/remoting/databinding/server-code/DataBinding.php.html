<!--
This file was generated by Web C Plus Plus software v0.7.13
Webcpp Copyright (C)2001, (C)2002, (C)2003 Jeffrey Bakker under the GNU GPL
Get webcpp at http://webcpp.sf.net
-->

<html>
<head>
<title>DataBinding.php</title>
<style type="text/css">

/** Webcpp v0.7.0+ compatible StyleSheet http://webcpp.sf.net **/
/** Theme: typical **/

body
{
background-color: #ffffff
}

a:link    {color:#ff0000}
a:visited {color:#666666}
a:active  {color:#0000ff}
a:hover   {color:#00b800}

pre
{
color: #000000
}

font
{
font-size:100%
}

font.preproc
{
color: #00b800
}

font.numbers
{
color: #a900a9
}

font.strings
{
color: #ff0000
}

font.keyword
{
color: #0000ff;
font-weight: bold
}

font.comment
{
color: #666666;
font-style: italic
}

</style>
</head>
<body>
<pre><INPUT TYPE="button" VALUE="Go Back" onClick="history.go(-1);return true;">
&lt;?php
<font CLASS=comment>/*******************************************************************
 * DataBinding.php
 * Copyright (C) 2006 Midnight Coders, LLC
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 *
 * The software is licensed under the GNU General Public License (GPL)
 * For details, see http://www.gnu.org/licenses/gpl.txt.
 ********************************************************************/</font>
<font CLASS=keyword>class</font> DataBinding
{
    <font CLASS=comment>// The getCustomers method retrieves data from the database and returns it to the requesting client.</font>
    <font CLASS=comment>// Notice the return value data type - it is System.Data.DataTable. WebORB automatically converts </font>
    <font CLASS=comment>// instances of the DataTable objects to arrays, so they can be used as data providers for </font>
    <font CLASS=comment>// the components like DataGrid</font>
    public <font CLASS=keyword>function</font> getCustomers()
    {
    	<font CLASS=preproc>$link</font> = mysql_connect(<font CLASS=strings>"localhost"</font>, <font CLASS=strings>"flexuser"</font>, <font CLASS=strings>"password"</font>);

    	mysql_select_db(<font CLASS=strings>'northwind'</font>, <font CLASS=preproc>$link</font>);

		<font CLASS=preproc>$result</font> = mysql_query(<font CLASS=strings>"SELECT * FROM Customers order by CustomerID;"</font>)or <font CLASS=keyword>die</font>(<font CLASS=strings>"Invalid query: "</font> . mysql_error());
    	
	    mysql_close(<font CLASS=preproc>$link</font>);

        <font CLASS=keyword>return</font> <font CLASS=preproc>$result;</font>
    }

    public <font CLASS=keyword>function</font> updateCustomer(Customer <font CLASS=preproc>$originalCustomerRecord</font>, <font CLASS=preproc>$changedFieldName</font> = null, <font CLASS=preproc>$newValue</font> = null)
    {
    	<font CLASS=preproc>$link</font> = mysql_connect(<font CLASS=strings>"localhost"</font>, <font CLASS=strings>"flexuser"</font>, <font CLASS=strings>"password"</font>);

    	mysql_select_db(<font CLASS=strings>'northwind'</font>, <font CLASS=preproc>$link</font>);

    	<font CLASS=keyword>if</font> (<font CLASS=preproc>$changedFieldName</font> == null &amp;&amp; <font CLASS=preproc>$newValue</font> == null)
    	{
    		<font CLASS=preproc>$query</font> = <font CLASS=strings>"UPDATE Customers set  Address = 		'<font CLASS=preproc>$originalCustomerRecord</font>-&gt;Address',
											City = 			'<font CLASS=preproc>$originalCustomerRecord</font>-&gt;City',
											CompanyName = 	'<font CLASS=preproc>$originalCustomerRecord</font>-&gt;CompanyName',
											ContactName = 	'<font CLASS=preproc>$originalCustomerRecord</font>-&gt;ContactName',
											ContactTitle = 	'<font CLASS=preproc>$originalCustomerRecord</font>-&gt;ContactTitle',
											Country =	 	'<font CLASS=preproc>$originalCustomerRecord</font>-&gt;Country',
											PostalCode = 	<font CLASS=strings>'<font CLASS=preproc>$originalCustomerRecord</font>-&gt;PostalCode'</font> "</font>;
    	}
    	<font CLASS=keyword>else</font>
    	{
    		<font CLASS=preproc>$query</font> = <font CLASS=strings>"UPDATE Customers set <font CLASS=preproc>$changedFieldName</font> = '<font CLASS=preproc>$newValue</font>' "</font>;
    	}
    	
    	<font CLASS=preproc>$query</font> .= <font CLASS=strings>" WHERE CustomerID = '<font CLASS=preproc>$originalCustomerRecord</font>-&gt;CustomerID';"</font>;
    	
    	<font CLASS=preproc>$result</font> = mysql_query(<font CLASS=preproc>$query</font>) or <font CLASS=keyword>die</font>(<font CLASS=strings>"Invalid query: "</font> . mysql_error());

	    mysql_close(<font CLASS=preproc>$link</font>);
    }
}
<font CLASS=keyword>class</font> Customer
{
	<font CLASS=keyword>var</font> <font CLASS=preproc>$Address;</font>
	<font CLASS=keyword>var</font> <font CLASS=preproc>$City;</font>
	<font CLASS=keyword>var</font> <font CLASS=preproc>$CompanyName;</font>
	<font CLASS=keyword>var</font>	<font CLASS=preproc>$ContactName;</font>
	<font CLASS=keyword>var</font> <font CLASS=preproc>$ContactTitle;</font>
	<font CLASS=keyword>var</font> <font CLASS=preproc>$Country;</font>
	<font CLASS=keyword>var</font> <font CLASS=preproc>$PostalCode;</font>
	<font CLASS=keyword>var</font> <font CLASS=preproc>$CustomerID;</font>
}
?&gt;



</pre>



</body>
</html>