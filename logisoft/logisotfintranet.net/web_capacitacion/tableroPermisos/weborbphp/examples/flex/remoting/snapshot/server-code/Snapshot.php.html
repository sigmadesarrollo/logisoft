<html>
<head>
<title>Codex Source (PHP): Snapshot.php.html</title>
</head>
<!-- Generated by SynEdit HTML exporter -->
<body text="#000000" bgcolor="#FFFFFF">
<pre>
<code><font  size="3" face="Courier New"><span style="background-color: #FFFFFF"><font color="#000000">&lt;?php
</font><font color="#0000FF"><i>/*******************************************************************
 * Snapshot.php
 * Copyright (C) 2006-2007 Midnight Coders, LLC
 *
 * The contents of this file are subject to the Mozilla Public License
 * Version 1.1 (the &quot;License&quot;); you may not use this file except in
 * compliance with the License. You may obtain a copy of the License at
 * http://www.mozilla.org/MPL/
 *
 * Software distributed under the License is distributed on an &quot;AS IS&quot;
 * basis, WITHOUT WARRANTY OF ANY KIND, either express or implied. See the
 * License for the specific language governing rights and limitations
 * under the License.
 *
 * The Original Code is WebORB Presentation Server (R) for PHP.
 * 
 * The Initial Developer of the Original Code is Midnight Coders, LLC.
 * All Rights Reserved.
 ********************************************************************/
</i><b>class</b> </font><font color="#000000">Snapshot
{
	public </font><font color="#0000FF"><i>/*string*/</i> <b>function</b> </font><font color="#000000">getImage(</font><font color="#008000">$byteArray</font><font color="#000000">, </font><font color="#008000">$fileName</font><font color="#000000">)
	{
		</font><font color="#008000">$data </font><font color="#000000">= </font><font color="#FF0000">&quot;&quot;</font><font color="#000000">;
		</font><font color="#0000FF"><b>foreach</b> </font><font color="#000000">(</font><font color="#008000">$byteArray </font><font color="#000000">as </font><font color="#008000">$byte</font><font color="#000000">)
			</font><font color="#008000">$data </font><font color="#000000">.= pack(</font><font color="#FF0000">&quot;C&quot;</font><font color="#000000">, </font><font color="#008000">$byte</font><font color="#000000">);
		
		</font><font color="#008000">$path </font><font color="#000000">= </font><font color="#FF0000">&quot;Upload&quot;</font><font color="#000000">.DIRECTORY_SEPARATOR;
		@mkdir(</font><font color="#008000">$path</font><font color="#000000">, </font><font color="#FF00FF">0777</font><font color="#000000">);
        </font><font color="#008000">$pngFile </font><font color="#000000">= fopen(</font><font color="#008000">$path</font><font color="#000000">.</font><font color="#008000">$fileName</font><font color="#000000">, </font><font color="#FF0000">&quot;wb&quot;</font><font color="#000000">) </font><font color="#0000FF"><b>or</b> <b>die</b></font><font color="#000000">(</font><font color="#FF0000">&quot;File not opened!&quot;</font><font color="#000000">);
        </font><font color="#0000FF"><b>if</b></font><font color="#000000">(</font><font color="#008000">$pngFile</font><font color="#000000">)
        {
			fwrite(</font><font color="#008000">$pngFile</font><font color="#000000">, </font><font color="#008000">$data</font><font color="#000000">);
			fclose(</font><font color="#008000">$pngFile</font><font color="#000000">);
        }

        </font><font color="#008000">$result </font><font color="#000000">= </font><font color="#008000">$fileName</font><font color="#000000">;
       
		</font><font color="#0000FF"><b>return</b> </font><font color="#008000">$result</font><font color="#000000">;
	}
}
?&gt;
</font></span></font>
</code></pre>
</body>
</html>