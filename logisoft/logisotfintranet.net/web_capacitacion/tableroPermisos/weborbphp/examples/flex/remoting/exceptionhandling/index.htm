<html>

<head>
<meta http-equiv="Content-Language" content="en-us">
<meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
<title>Exception Handling Example</title>
<LINK href="../../../orbexamples.css" rel="stylesheet" type="text/css">
</head>

<body>

<table border="0" style="border-collapse: collapse" width="100%" cellpadding="3" id="table1" cellspacing="2">
	<tr>
		<td width="181" valign="top" class="boldCell">Example name:</td>
		<td><b>Remote Invocation Exception Handling</b></td>
	</tr>
	<tr>
		<td width="181" valign="top" class="boldCell">Description:</td>
		<td>The example demonstrates the following:<ul>
			<li>Handling of exceptions thrown from remote method invocations</li>
			<li>Demonstration of the exception object field values delivered to 
			the client</li>
		</ul>
		<p>The client application invokes methods in a PHP object causing 
		exceptions. WebORB intercepts the exceptions and delivers them as errors 
		to the client.</td>
	</tr>
	<tr>
		<td width="181" valign="top" class="boldCell">Client-side code:</td>
		<td><a href="srcview/index.html">Browse</a>&nbsp;
		<a href="srcview/Exceptions.zip">Download</a></td>
	</tr>
	<tr>
		<td width="181" valign="top" class="boldCell">Server-side code:</td>
		<td><a href="server-code/listing.htm">Browse</a>&nbsp;
		<a href="server-code/ExceptionsTestSource.zip">Download</a></td>
	</tr>

	<tr>
		<td width="181" valign="top" class="boldCell">Run example:</td>
		<td>
		  	<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"
					id="Exceptions" width="660" height="290"
					codebase="http://fpdownload.macromedia.com/get/flashplayer/current/swflash.cab">
					<param name="movie" value="Exceptions.swf" />
					<param name="quality" value="high" />
					<param name="bgcolor" value="#869ca7" />
					<param name="allowScriptAccess" value="sameDomain" />
					<embed src="Exceptions.swf" quality="high" bgcolor="#869ca7"
						width="660" height="290" name="Exceptions" align="middle"
						play="true"
						loop="false"
						quality="high"
						allowScriptAccess="sameDomain"
						type="application/x-shockwave-flash"
						pluginspage="http://www.adobe.com/go/getflashplayer">
					</embed></object>
		</td>
	</tr>
	<tr>
		<td width="181" valign="top" class="boldCell">Key points:</td>
		<td>
		<ul>
			<li>Any exception generated by the server-code is delivered to the 
			client with the same error message. Consider the server-side code 
			behind this example:<br>
&nbsp;<table border="1" style="border-collapse: collapse" cellpadding="3" bgcolor="#E5E5E5" id="table2" bordercolor="#999999">
				<tr>
					<td>
<span style="font-size: 9.0pt; font-family: Courier New; color: blue">
						require_once</span><span style="font-size: 9.0pt; font-family: Courier New; color: green"> 
						("MyException.php");</span><br>
<span style="font-size: 9.0pt; font-family: Courier New; color: blue">
						class</span><span style="font-size: 9.0pt; font-family: Courier New;">
						 ExceptionsTest</span><br>
						{<br>
<span style="font-size: 9.0pt; font-family: Courier New;">
						&nbsp;&nbsp;    
						<span style="color: blue">public function</span> divByZero()<br>
						&nbsp;&nbsp;    {<br>
						&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue">return</span><span style="color: red"> 5 </span>/ <span style="color: red">0</span>;<br>
						&nbsp;&nbsp;    }<br>
						<br>
						&nbsp;&nbsp;<span style="color: blue">public function</span> NPE()<br>
						&nbsp;&nbsp;    {<br>
						&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        $o = null;<br>
						&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        $o->test();<br>
						&nbsp;&nbsp;    }<br>
						<br>
						&nbsp;&nbsp;<span style="color: blue">public function</span> throwException()<br>
						&nbsp;&nbsp;    {<br>
						&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue">throw new</span> MyException( <span style="color: green">"this is a custom application exception"</span> );<br>
						&nbsp;&nbsp;    }<br>
						}
</span>					
					</td>
					<td valign="top">
<span style="font-size: 9.0pt; font-family: Courier New;">
						<span style="color: blue">class</span> MyException <span style="color: blue">extends</span> Exception<br>
						{<br>
						&nbsp;&nbsp;    <span style="color: blue">public</span> $message;<br>
						<br>
						&nbsp;&nbsp;    <span style="color: blue">function</span> __construct($message)<br>
						&nbsp;&nbsp;    {<br>
						&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        $this->message = $message;<br>
						&nbsp;&nbsp;    }<br>
						}
</span>			
					</td>

				</tr>
			</table><br></li>
			<li>The best way to get the message of the remote exception is by 
			using the &quot;faultString&quot; property of the fault object.</li>
		</ul>
		</td>
	</tr>
	</table>

</body>

</html>